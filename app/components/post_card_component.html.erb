<div class="bg-[#31363f] rounded-lg shadow-md p-4 sm:p-6 mb-7 border border-[#ffd369]">
  <!-- Шапка карточки -->
  <div class="flex items-start sm:items-center mb-4 flex-col sm:flex-row gap-3 sm:gap-0 sm:justify-between">
    <!-- Левая часть: аватар и инфо -->
    <div class="flex flex-row items-center w-full sm:w-auto">
      <%= link_to profile_path(@post.user) do %>
        <div class="w-10 h-10 sm:w-12 sm:h-12 bg-[#ffd369] rounded-full flex items-center justify-center mr-3 sm:mr-4 flex-shrink-0">
          <span class="text-[#222831] text-lg sm:text-xl font-bold">
            <%= @post.user.email&.first&.upcase %>
          </span>
        </div>
      <% end %>

      <div class="flex-1 min-w-0">
        <%= link_to profile_path(@post.user) do %>
          <h3 class="font-semibold text-[#ffd369] text-sm sm:text-base truncate">
            <%= @post.user.email %>
          </h3>
        <% end %>
        <p class="text-xs sm:text-sm text-gray-500">
          <%= @post.created_at.strftime("%d.%m.%Y %H:%M") %>
        </p>
      </div>
    </div>

    <!-- Правая часть: кнопки действий -->
    <div class="flex items-center gap-2 w-full sm:w-auto justify-end">
      <% if @current_user && @post.user != @current_user %>
        <%= helpers.button_to "Написать",
              helpers.conversations_path(recipient_id: @post.user.id),
              method: :post,
              class: "bg-[#ffd369] text-[#222831] px-4 py-2 rounded text-xs sm:text-sm hover:bg-[#ffd369]/50 cursor-pointer whitespace-nowrap" %>
      <% end %>

      <% if @current_user && @post.user === @current_user %>
        <%= helpers.button_to(
          helpers.post_path(@post),
          method: :delete,
          data: { turbo_confirm: "Удалить пост?" },
          class: "p-2 hover:bg-[#ffd369]/10 rounded transition-colors"
        ) do %>
          <%= helpers.heroicon(
                "trash",
                variant: :outline,
                options: { class: "w-5 h-5 sm:w-6 sm:h-6 text-red-500 hover:text-red-700 cursor-pointer" }
              ) %>
        <% end %>
      <% end %>
    </div>
  </div>

  <!-- Контент поста -->
  <div class="mb-4 border-b border-[#ffd369] pb-4">
    <p class="text-white text-sm sm:text-base break-words">
      <%= @post.content %>
    </p>
  </div>

  <!-- Действия: лайки и комментарии -->
  <div class="flex items-center gap-4 sm:gap-6">
    <%= helpers.turbo_frame_tag "post_#{@post.id}_likes" do %>
      <%= helpers.button_to(
            post_like_path,
            method: post_like_method,
            class: "#{like_button_class} inline-flex items-center gap-1.5 sm:gap-2 hover:text-[#ffd369] transition-colors ease-in-out duration-200 text-sm sm:text-base",
            data: { turbo_stream: true }
          ) do %>
        <%= helpers.heroicon(
              "heart",
              variant: user_liked? ? :solid : :outline,
              options: { class: "w-5 h-5 sm:w-6 sm:h-6" }
            ) %>
        <span class="text-sm sm:text-base"><%= @post.likes.count %></span>
      <% end %>
    <% end %>

    <%= helpers.link_to helpers.post_path(@post),
          class: "text-gray-500 inline-flex items-center gap-1.5 sm:gap-2 hover:text-[#ffd369] transition-colors ease-in-out duration-200 text-sm sm:text-base" do %>
      <%= helpers.heroicon(
            "chat-bubble-left-right",
            variant: :outline,
            options: { class: "w-5 h-5 sm:w-6 sm:h-6" }
          ) %>
      <span class="text-sm sm:text-base"><%= @post.comments.count %></span>
    <% end %>
  </div>
</div>
