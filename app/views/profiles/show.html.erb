<div class="bg-[#222831] min-h-screen">
  <div class="hidden lg:block absolute top-20 left-20">
    <%= render(HeaderComponent.new(current_user: current_user)) %>
  </div>
  <div class="lg:hidden fixed top-0 left-0 right-0 z-50">
    <%= render(HeaderComponent.new(current_user: current_user)) %>
  </div>
  <div class="max-w-4xl mx-auto px-3 sm:px-4 py-4 sm:py-8 pt-20 lg:pt-8">
    <div class="bg-[#31363f] rounded-lg shadow-md p-4 sm:p-6 border border-[#ffd369]">
      <div class="flex flex-col sm:flex-row items-start sm:items-start justify-between gap-4">
        <div class="flex flex-col sm:flex-row items-center sm:items-start w-full sm:w-auto">
          <div class="w-20 h-20 sm:w-24 sm:h-24 bg-[#ffd369] rounded-full flex items-center justify-center mb-3 sm:mb-0 sm:mr-6 flex-shrink-0">
            <span class="text-[#222831] text-3xl sm:text-4xl font-bold">
              <%= @user.email&.first&.upcase %>
            </span>
          </div>
          <div class="text-center sm:text-left w-full sm:w-auto">
            <h1 class="text-xl sm:text-2xl lg:text-3xl font-bold mb-2 text-[#ffd369] break-all sm:break-normal">
              <%= @user.email %>
            </h1>
            <div class="flex justify-center sm:justify-start space-x-4 sm:space-x-6 text-xs sm:text-sm">
              <div>
                <span class="font-semibold text-[#ffd369]">
                  <%=
                    if @posts.count == 0
                      "#{@posts.count} постов"
                    elsif @posts.count == 1
                      "#{@posts.count} пост"
                    elsif (2..4).include?(@posts.count % 10) && ![11, 12, 13, 14].include?(@posts.count % 100)
                      "#{@posts.count} поста"
                    else
                      "#{@posts.count} постов"
                    end
                  %>
                </span>
              </div>
            </div>
          </div>
        </div>

        <div class="flex flex-col sm:flex-row gap-2 w-full">
          <% if @is_own_profile %>
            <%= link_to "Редактировать",
                  edit_user_registration_path,
                  class: "px-4 py-2 bg-[#ffd369] text-[#222831] rounded-lg hover:bg-[#ffd369]/80 transition text-center text-sm sm:text-base whitespace-nowrap" %>
            <%= button_to "Выйти",
                  destroy_user_session_path,
                  method: :delete,
                  class: "px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition text-sm text-center sm:text-base whitespace-nowrap w-full" %>
          <% else %>
            <%= button_to "Написать сообщение",
                  conversations_path(recipient_id: @user.id),
                  method: :post,
                  class: "px-4 py-2 bg-[#ffd369] text-[#222831] rounded-lg hover:bg-[#ffd369]/80 transition cursor-pointer text-center text-sm sm:text-base whitespace-nowrap" %>
          <% end %>
        </div>
      </div>
    </div>

    <!-- Список постов -->
    <div class="space-y-4 mt-4 sm:mt-6">
      <% if @posts.any? %>
        <% @posts.each do |post| %>
          <%= render(PostCardComponent.new(post: post, current_user: current_user)) %>
        <% end %>
      <% else %>
        <div class="bg-[#31363f] p-8 sm:p-12 rounded-lg shadow-md text-center border border-[#ffd369]">
          <p class="text-[#ffd369] text-base sm:text-lg mb-4">
            <% if @is_own_profile %>
              У вас пока нет постов
            <% else %>
              У <%= @user.email %> пока нет постов
            <% end %>
          </p>

          <% if @is_own_profile %>
            <%= link_to "Создать первый пост",
                  new_post_path,
                  class: "inline-block bg-[#ffd369] text-[#222831] px-5 py-2.5 sm:px-6 sm:py-3 rounded-lg hover:bg-[#ffd369]/80 transition text-sm sm:text-base" %>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
</div>
